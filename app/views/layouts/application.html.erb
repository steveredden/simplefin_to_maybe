<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="<%= asset_path('sync.png') %>" type="image/x-icon">
    <title>SimpleFIN to Maybe</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  </head>

  <body class="pb-16">
    <nav class="bg-gray-900 text-white p-4 fixed w-full top-0 z-50 shadow-lg">
      <div class="container flex flex-wrap items-center gap-10 px-6">

        <!-- Left: Icons -->
        <div class="flex items-center gap-4">
          <%= link_to "https://beta-bridge.simplefin.org/", target: "_blank", rel: "noopener noreferrer" do %>
            <%= image_tag("simplefin_logo.svg", class: "w-5 h-5 shrink-0") %>
          <% end %>
          <i class="fas fa-arrow-right text-lg text-white"></i>
          <%= link_to "https://maybefinance.com", target: "_blank", rel: "noopener noreferrer" do %>
            <%= image_tag("maybe.png", class: "w-5 h-5 shrink-0") %>
          <% end %>
        </div>

        <!-- Vertical Separator -->
        <div class="border-l-4 border-gray-500 h-6"></div>

        <!-- Navigation with Home Dropdown -->
        <div class="flex items-center gap-5">
          <!-- Home Dropdown Container -->
          <div class="relative group">
            <!-- Trigger -->
            <%= link_to root_path, class: "flex items-center gap-2 hover:text-gray-300 rounded-md transition-all px-3 py-2" do %>
              <i class="fas fa-home"></i>
              <span>Home</span>
              <svg class="w-3 h-3 ml-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.293l3.71-4.06a.75.75 0 111.08 1.04l-4.25 4.65a.75.75 0 01-1.08 0l-4.25-4.65a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
              </svg>
            <% end %>

            <!-- Dropdown (completely removed from layout until hovered) -->
            <div class="absolute left-0 top-full w-44 z-50 hidden group-hover:block">
              <div class="bg-white text-black rounded-md shadow-lg mt-1 py-2">
                <%= link_to root_path, class: "flex items-center gap-2 px-4 py-2 hover:bg-gray-100 transition" do %>
                  <i class="fas fa-refresh w-4"></i>
                  <span>Syncs</span>
                <% end %>
                <%= link_to mortgages_path, class: "flex items-center gap-2 px-4 py-2 hover:bg-gray-100 transition" do %>
                  <i class="fas fa-landmark w-4"></i>
                  <span>Mortgage/Loans</span>
                <% end %>
              </div>
            </div>
          </div>

          <!-- Accounts -->
          <%= link_to accounts_path, class: "flex items-center gap-3 hover:text-gray-300" do %>
            <i class="fas fa-file-invoice-dollar"></i>
            <span>Accounts</span>
          <% end %>

          <!-- Configuration -->
          <%= link_to settings_path, class: "flex items-center gap-3 hover:text-gray-300" do %>
            <i class="fas fa-cog"></i>
            <span>Configuration</span>
          <% end %>
        </div>

        <!-- Vertical Separator -->
        <div class="border-l-4 border-gray-500 h-6"></div>

        <!-- Right: Links -->
        <div class="flex items-center gap-5">
          <%= link_to "https://github.com/steveredden/simplefin_to_maybe", target: "_blank", rel: "noopener noreferrer", class: "flex items-center gap-3 hover:text-gray-300" do %>
            <i class="fa-brands fa-github"></i>
            <span>SimpleFIN to Maybe (<%= Rails.configuration.app_version %>)</span>
          <% end %>
        </div>

      </div>
    </nav>
    <div class="pt-14 pb-20 pl-10 pr-10">
      <%= yield %>
    </div>
  </body>
</html>
